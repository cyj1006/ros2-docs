# 第四章：为什么选择 Ubuntu 20.04/22.04——这个选择很重要，别踩坑

## 4.1 强烈建议

!!! success "核心推荐"
    **用 Ubuntu 20.04 或者 22.04！**

这不是我个人偏好，是实践得出来的结论。

!!! warning "血泪教训"
    我见过太多同学因为用了其他版本的系统，
    
    结果各种问题搞得焦头烂额。

---

## 4.2 为什么不推荐 Ubuntu 24.04

虽然 24.04 是最新的 LTS 版本，但学 ROS2 的话，我真不推荐。

---

### 主要原因：Gazebo 仿真器的兼容性问题

#### Gazebo 的重要性

!!! info "核心工具"
    Gazebo 是 ROS2 生态里 **最重要的仿真工具**，
    
    让你不用真机器人就能测试代码。

---

#### Ubuntu 24.04 的问题

!!! danger "严重限制"
    经典版 Gazebo 在 Ubuntu 24.04 上 **已经不支持了**。

---

#### 新版 Gazebo 的尴尬

新版 Gazebo（以前叫 Ignition）虽然更强大，但问题是：

- 大量的教程、示例、功能包都是基于 **经典版** 写的
- 还没适配新版

---

### 你要是用 24.04，会发现

!!! warning "实际困难"
    1. **网上的教程跑不通**
       - 因为教程用的是经典 Gazebo
    
    2. **很多现成的仿真包装不上**
    
    3. **遇到问题搜不到解决办法**
       - 因为用 24.04 的人还太少

---

### 结论

!!! tip "避坑指南"
    别图新，老老实实用 20.04 或 22.04。

---

## 4.3 版本对应关系

这是官方推荐的版本配对：

| Ubuntu 版本 | ROS2 版本 | 推荐程度 |
|-------------|-----------|----------|
| Ubuntu 20.04 | ROS2 Foxy | ⭐⭐⭐⭐ |
| Ubuntu 22.04 | ROS2 Humble | ⭐⭐⭐⭐⭐ |
| Ubuntu 24.04 | ROS2 Jazzy | ⭐⭐ (Gazebo有问题，不推荐新手用) |

---

### 我的建议

!!! success "最佳选择"
    **Ubuntu 22.04 + ROS2 Humble**
    
    这是目前最稳定、资源最丰富的组合。

---

#### 为什么推荐这个组合？

1. **长期支持（LTS）**
   - Ubuntu 22.04 支持到 2027 年
   - ROS2 Humble 支持到 2027 年

2. **资源最丰富**
   - 教程多
   - 功能包完善
   - 社区活跃

3. **稳定性最好**
   - 经过充分测试
   - Bug 较少

---

## 4.4 系统安装方式怎么选

有三种方式可以运行 Ubuntu：

---

### 方式一：虚拟机（最推荐新手）

#### 什么是虚拟机

就是在你现有的 Windows 或 Mac 上装个 VMware 或 VirtualBox，

在里面装 Ubuntu。

---

#### 优点

!!! success "新手友好"
    - ✓ 不影响你原来的系统
    - ✓ 随便折腾，搞砸了还能回滚
    - ✓ 安装简单，风险低

---

#### 缺点

!!! warning "性能损耗"
    - 性能有损耗，大概只有原生的七八成
    - 复杂的仿真可能会卡

---

#### 配置建议

如果用虚拟机，建议配置：

```
内存：8G
硬盘：100G
CPU：分配一半核心
显示：记得开 3D 加速（不然 Gazebo 会黑屏）
```

---

### 方式二：双系统

#### 什么是双系统

就是电脑上同时装 Windows 和 Ubuntu，

开机时选启动哪个。

---

#### 优点

!!! success "性能最佳"
    - ✓ 性能是最好的
    - ✓ 适合长期用

---

#### 缺点

!!! danger "有风险"
    - 安装有一定风险
    - 操作不当可能把原来的系统搞坏

---

#### 建议

!!! tip "稳妥做法"
    先用虚拟机熟悉一下 Linux，
    
    有点经验了再装双系统。

---

### 方式三：WSL2

#### 什么是 WSL2

这是微软自己搞的，在 Windows 里跑 Linux。

---

#### 优点

!!! info "便利性"
    - ✓ 安装简单
    - ✓ 性能也还行

---

#### 缺点

!!! warning "图形支持"
    - 图形界面支持需要额外配置
    - Gazebo 可能需要折腾一下

---

## 4.5 我的建议

### 针对不同情况的建议

#### 如果你是纯新手

!!! success "推荐方案"
    **用虚拟机，安全省心。**

---

#### 如果你有一定经验

等玩熟了，觉得虚拟机性能不够用了，

再考虑装双系统。

---

#### 如果你只是想试试

!!! info "轻量方案"
    WSL2 可以快速上手，
    
    但长期学习还是建议虚拟机或双系统。

---

## 4.6 硬件要求

### 最低配置

```
CPU：双核
内存：4GB
硬盘：50GB
```

!!! warning "仅够基础学习"
    这个配置只能跑基础功能，
    
    仿真会很卡。

---

### 推荐配置

```
CPU：四核及以上
内存：8GB 及以上
硬盘：100GB 及以上
```

!!! success "流畅体验"
    这个配置可以流畅运行仿真。

---

### 理想配置

```
CPU：六核及以上
内存：16GB 及以上
硬盘：200GB 及以上
显卡：独显（NVIDIA 最好）
```

!!! info "专业开发"
    这个配置适合深度学习、复杂仿真等场景。

---

## 4.7 常见问题

### 问题1：我的电脑配置不够怎么办？

!!! tip "解决方案"
    - 可以先用虚拟机学习基础知识
    - 需要仿真时去实验室或机房虑云服务器

---

### 问题2：我能用 Mac 吗？

!!! info "Mac 用户"
    可以，但：
    - 虚拟机性能会更差（特别是 M 系列芯片）
    - 部分硬件驱动可能有问题
    - 建议有条件还是用 Linux 原生

---

### 问题3：我已经装了 Ubuntu 24.04 怎么办？

!!! warning "建议"
    如果还没开始学 ROS2：
    - 重装 Ubuntu 22.04
    
    如果已经学了一段时间：
    - 可以继续用，但要有心理准备遇到兼容性问题

---

## 4.8 版本选择决策树

```
你想学 ROS2
    ↓
选择 Ubuntu 版本
    ↓
有电脑吗？
    ├── 有 → 配置够吗？（8G+ 内存）
    │         ├── 够 → 纯新手？
    │         │        ├── 是 → 虚拟机 + Ubuntu 22.04
    │         │        └── 否 → 双系统 + Ubuntu 22.04
    │         └── 不够 → 虚拟机（降低配置）或机房
    └── 没有 → 考虑云服务器或借用机房
```

---

## 本章小结

通过这一章，你应该已经明白：

1. **版本选择很重要**
   - 推荐 Ubuntu 22.04 + ROS2 Humble
   - 不推荐 Ubuntu 24.04（Gazebo 兼容性问题）

2. **安装方式的选择**
   - 新手：虚拟机
   - 有经验：双系统
   - 尝鲜：WSL2

3. **硬件要求**
   - 最低：4GB 内存
   - 推荐：8GB 内存
   - 理想：16GB 内存

4. **避坑指南**
   - 别盲目追新版本
   - 选择成熟稳定的组合
   - 根据自己情况选择安装方式

---

## 下一章预告

下一章我们会讲：

> **学习 ROS2 前需要准备什么——先打好基础**

帮你了解需要掌握哪些前置知识，

避免学习过程中遇到不必要的障碍。


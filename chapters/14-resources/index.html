
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../13-troubleshooting/">
      
      
        <link rel="next" href="../others-DS/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>14 常见问题与解决方案 - ROS2 新手指导</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ROS2 新手指导" class="md-header__button md-logo" aria-label="ROS2 新手指导" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ROS2 新手指导
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              14 常见问题与解决方案
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ROS2 新手指导" class="md-nav__button md-logo" aria-label="ROS2 新手指导" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ROS2 新手指导
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    首页
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    第一部分：认识与选型
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    第一部分：认识与选型
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-what-is-ros2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    01 什么是 ROS2
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-what-can-ros2-do/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    02 ROS2能干什么
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-ros1-vs-ros2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    03 ROS2 的前身 ROS1
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-why-ubuntu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    04 为什么选择 Ubuntu 20.04/22.04
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    第二部分：学习前准备
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    第二部分：学习前准备
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05-before-you-start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    05 学习前需要准备什么
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    06 开发工具介绍
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    第三部分：安装与验证
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    第三部分：安装与验证
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07-install-ubuntu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    07 ROS2 支持哪些编程语言
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08-install-ros2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    08 Ubuntu 系统安装教程
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    第四部分：核心概念与实战
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    第四部分：核心概念与实战
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09-core-concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    09 ROS2 安装教程
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10-hello-node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    10 ROS2 核心概念详解
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11-pub-sub/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    11 第一个 ROS2 程序
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../12-turtlesim/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    12 项目实战
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    第五部分：排障与资源
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    第五部分：排障与资源
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../13-troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    13 进阶项目
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    14 常见问题与解决方案
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    14 常见问题与解决方案
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#141" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.1 环境相关问题
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.1 环境相关问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题1: 找不到包
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-source" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题2: source 了还是找不到
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-python" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题3: Python 包导入失败
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#142" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.2 编译相关问题
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.2 编译相关问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4-colcon-build" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题4: colcon build 失败
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题5: 只想编译特定的包
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#143" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.3 运行相关问题
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.3 运行相关问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题6: 话题收不到消息
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题7: 节点启动后立即退出
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题8: 回调函数不执行
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#144" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.4 小海龟相关问题
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.4 小海龟相关问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#9" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题9: 小海龟窗口是黑屏
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10-gazebo" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题10: Gazebo 黑屏或闪退
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题11: 小海龟不动
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#145" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.5 权限相关问题
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.5 权限相关问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#12-permission-denied" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题12: Permission denied
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#146" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.6 网络相关问题
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.6 网络相关问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#13" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题13: 多台电脑的节点看不到对方
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#147" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.7 调试技巧
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.7 调试技巧">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        技巧1: 打印日志
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      
        技巧2: 查看节点信息
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      
        技巧3: 查看话题信息
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      
        技巧4: 可视化节点关系
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        技巧5: 录制和回放数据
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        技巧6: 手动发布消息
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        技巧7: 调用服务
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#148" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.8 常用命令速查表
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.8 常用命令速查表">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        节点相关
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        话题相关
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        服务相关
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        参数相关
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        包相关
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        接口相关
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        编译相关
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#149" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.9 问题排查流程
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.9 问题排查流程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        第1步: 看报错信息
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        第2步: 检查环境
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        第3步: 检查代码
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        第4步: 查看日志
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        第5步: 搜索
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        第6步: 还不行?
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1410" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.10 预防性措施
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.10 预防性措施">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        措施1: 养成好习惯
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        措施2: 使用版本控制
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        措施3: 虚拟机快照
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        措施4: 写测试
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        措施5: 模块化开发
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        本章小结
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        实用建议
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        结束
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    其他项目
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    其他项目
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../others-DS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    15 关于数据结构的学习
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#141" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.1 环境相关问题
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.1 环境相关问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题1: 找不到包
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-source" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题2: source 了还是找不到
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-python" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题3: Python 包导入失败
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#142" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.2 编译相关问题
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.2 编译相关问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4-colcon-build" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题4: colcon build 失败
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题5: 只想编译特定的包
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#143" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.3 运行相关问题
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.3 运行相关问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题6: 话题收不到消息
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题7: 节点启动后立即退出
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题8: 回调函数不执行
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#144" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.4 小海龟相关问题
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.4 小海龟相关问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#9" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题9: 小海龟窗口是黑屏
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10-gazebo" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题10: Gazebo 黑屏或闪退
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题11: 小海龟不动
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#145" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.5 权限相关问题
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.5 权限相关问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#12-permission-denied" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题12: Permission denied
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#146" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.6 网络相关问题
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.6 网络相关问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#13" class="md-nav__link">
    <span class="md-ellipsis">
      
        问题13: 多台电脑的节点看不到对方
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#147" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.7 调试技巧
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.7 调试技巧">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        技巧1: 打印日志
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      
        技巧2: 查看节点信息
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      
        技巧3: 查看话题信息
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      
        技巧4: 可视化节点关系
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        技巧5: 录制和回放数据
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        技巧6: 手动发布消息
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        技巧7: 调用服务
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#148" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.8 常用命令速查表
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.8 常用命令速查表">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        节点相关
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        话题相关
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        服务相关
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        参数相关
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        包相关
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        接口相关
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        编译相关
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#149" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.9 问题排查流程
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.9 问题排查流程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        第1步: 看报错信息
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        第2步: 检查环境
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        第3步: 检查代码
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        第4步: 查看日志
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        第5步: 搜索
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        第6步: 还不行?
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1410" class="md-nav__link">
    <span class="md-ellipsis">
      
        14.10 预防性措施
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14.10 预防性措施">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        措施1: 养成好习惯
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        措施2: 使用版本控制
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        措施3: 虚拟机快照
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        措施4: 写测试
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        措施5: 模块化开发
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        本章小结
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        实用建议
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        结束
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="_1">第十四章:常见问题与解决方案——遇到问题别慌<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<p>学习 ROS2 的过程中,肯定会遇到各种问题。</p>
<p>这一章我把自己踩过的坑、学弟学妹们经常问的问题,都整理了一遍。</p>
<div class="admonition info">
<p class="admonition-title">使用建议</p>
<p>建议把这一章加入收藏,遇到问题时回来翻一翻,<br />
大概率能找到解决办法。</p>
</div>
<hr />
<h2 id="141">14.1 环境相关问题<a class="headerlink" href="#141" title="Permanent link">&para;</a></h2>
<p>这类问题最常见,也最让新手抓狂。</p>
<hr />
<h3 id="1">问题1: 找不到包<a class="headerlink" href="#1" title="Permanent link">&para;</a></h3>
<p><strong>现象</strong>:</p>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>my_package<span class="w"> </span>my_node
<span class="c1"># 输出: Package &#39;my_package&#39; not found</span>
</code></pre></div>
<p><strong>原因</strong>: 环境变量没有加载</p>
<p><strong>解决方案</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 先加载 ROS2 环境</span>
<span class="nb">source</span><span class="w"> </span>/opt/ros/humble/setup.bash

<span class="c1"># 再加载自己的工作空间</span>
<span class="nb">source</span><span class="w"> </span>~/ros2_ws/install/setup.bash

<span class="c1"># 验证是否成功</span>
ros2<span class="w"> </span>pkg<span class="w"> </span>list<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>my_package
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">永久解决</p>
<p>每次开新终端都要 source 很烦?加到 <code>.bashrc</code> 里:</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;source /opt/ros/humble/setup.bash&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;source ~/ros2_ws/install/setup.bash&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
<span class="nb">source</span><span class="w"> </span>~/.bashrc
</code></pre></div>
</div>
<hr />
<h3 id="2-source">问题2: source 了还是找不到<a class="headerlink" href="#2-source" title="Permanent link">&para;</a></h3>
<p><strong>可能原因1</strong>: 编译后没有 source</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/ros2_ws
colcon<span class="w"> </span>build<span class="w"> </span>--packages-select<span class="w"> </span>my_package

<span class="c1"># ⚠️ 编译完一定要重新 source</span>
<span class="nb">source</span><span class="w"> </span>install/setup.bash
</code></pre></div>
<p><strong>可能原因2</strong>: setup.py 配置错误</p>
<p>检查 <code>entry_points</code> 是否正确:</p>
<div class="highlight"><pre><span></span><code><span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;console_scripts&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;my_node = my_package.my_node:main&#39;</span><span class="p">,</span>  <span class="c1"># 格式要对</span>
    <span class="p">],</span>
<span class="p">},</span>
</code></pre></div>
<p><strong>可能原因3</strong>: 包名和节点名搞混了</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 错误</span>
ros2<span class="w"> </span>run<span class="w"> </span>my_node<span class="w"> </span>my_package<span class="w">  </span><span class="c1"># 顺序反了</span>

<span class="c1"># 正确</span>
ros2<span class="w"> </span>run<span class="w"> </span>my_package<span class="w"> </span>my_node<span class="w">  </span><span class="c1"># 包名在前,节点在后</span>
</code></pre></div>
<hr />
<h3 id="3-python">问题3: Python 包导入失败<a class="headerlink" href="#3-python" title="Permanent link">&para;</a></h3>
<p><strong>现象</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="ne">ModuleNotFoundError</span><span class="p">:</span> <span class="n">No</span> <span class="n">module</span> <span class="n">named</span> <span class="s1">&#39;xxx&#39;</span>
</code></pre></div>
<p><strong>解决方案</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 安装 Python 包时一定要加 --break-system-packages</span>
pip<span class="w"> </span>install<span class="w"> </span>xxx<span class="w"> </span>--break-system-packages

<span class="c1"># 或者用 apt 安装(推荐)</span>
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>python3-xxx
</code></pre></div>
<hr />
<h2 id="142">14.2 编译相关问题<a class="headerlink" href="#142" title="Permanent link">&para;</a></h2>
<hr />
<h3 id="4-colcon-build">问题4: colcon build 失败<a class="headerlink" href="#4-colcon-build" title="Permanent link">&para;</a></h3>
<p><strong>情况1</strong>: 缓存问题</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/ros2_ws

<span class="c1"># 清除所有缓存</span>
rm<span class="w"> </span>-rf<span class="w"> </span>build<span class="w"> </span>install<span class="w"> </span>log

<span class="c1"># 重新编译</span>
colcon<span class="w"> </span>build
</code></pre></div>
<hr />
<p><strong>情况2</strong>: 依赖缺失</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 安装依赖</span>
rosdep<span class="w"> </span>install<span class="w"> </span>--from-paths<span class="w"> </span>src<span class="w"> </span>--ignore-src<span class="w"> </span>-r<span class="w"> </span>-y
</code></pre></div>
<p>如果 rosdep 也报错,先更新它:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>rosdep<span class="w"> </span>init
rosdep<span class="w"> </span>update
</code></pre></div>
<hr />
<p><strong>情况3</strong>: setup.py 错误</p>
<p>常见错误:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ❌ 错误:忘记导入</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">setuptools</span><span class="w"> </span><span class="kn">import</span> <span class="n">setup</span>

<span class="c1"># ✅ 正确:完整导入</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">setuptools</span><span class="w"> </span><span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># ❌ 错误:包名和文件夹名不一致</span>
<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;my_pkg&#39;</span><span class="p">,</span>  <span class="c1"># setup.py 里写的</span>
    <span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;my_package&#39;</span><span class="p">]</span>  <span class="c1"># 实际文件夹名</span>
<span class="p">)</span>

<span class="c1"># ✅ 正确:一致</span>
<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;my_package&#39;</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;my_package&#39;</span><span class="p">]</span>
<span class="p">)</span>
</code></pre></div>
<hr />
<p><strong>情况4</strong>: CMakeLists.txt 错误 (C++ 包)</p>
<p>如果是 C++ 包,检查 <code>CMakeLists.txt</code>:</p>
<div class="highlight"><pre><span></span><code><span class="c"># 常见问题:忘记添加可执行文件</span>
<span class="nb">add_executable</span><span class="p">(</span><span class="s">my_node</span><span class="w"> </span><span class="s">src/my_node.cpp</span><span class="p">)</span>

<span class="c"># 或忘记链接依赖</span>
<span class="nb">ament_target_dependencies</span><span class="p">(</span><span class="s">my_node</span><span class="w"> </span><span class="s">rclcpp</span><span class="p">)</span>

<span class="c"># 或忘记安装</span>
<span class="nb">install</span><span class="p">(</span><span class="s">TARGETS</span>
<span class="w">  </span><span class="s">my_node</span>
<span class="w">  </span><span class="s">DESTINATION</span><span class="w"> </span><span class="s">lib/</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span>
<span class="p">)</span>
</code></pre></div>
<hr />
<h3 id="5">问题5: 只想编译特定的包<a class="headerlink" href="#5" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 只编译 my_package</span>
colcon<span class="w"> </span>build<span class="w"> </span>--packages-select<span class="w"> </span>my_package

<span class="c1"># 编译 my_package 及其依赖</span>
colcon<span class="w"> </span>build<span class="w"> </span>--packages-up-to<span class="w"> </span>my_package

<span class="c1"># 跳过某个包</span>
colcon<span class="w"> </span>build<span class="w"> </span>--packages-skip<span class="w"> </span>bad_package
</code></pre></div>
<hr />
<h2 id="143">14.3 运行相关问题<a class="headerlink" href="#143" title="Permanent link">&para;</a></h2>
<hr />
<h3 id="6">问题6: 话题收不到消息<a class="headerlink" href="#6" title="Permanent link">&para;</a></h3>
<p><strong>步骤1</strong>: 检查话题是否存在</p>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>topic<span class="w"> </span>list
</code></pre></div>
<hr />
<p><strong>步骤2</strong>: 检查是否有发布者</p>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>topic<span class="w"> </span>info<span class="w"> </span>/my_topic
</code></pre></div>
<p>输出应该有:</p>
<div class="highlight"><pre><span></span><code>Publisher count: 1  # 至少有一个发布者
Subscriber count: 1
</code></pre></div>
<hr />
<p><strong>步骤3</strong>: 检查消息类型是否匹配</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 发布者的消息类型</span>
ros2<span class="w"> </span>topic<span class="w"> </span>info<span class="w"> </span>/my_topic

<span class="c1"># 订阅者代码里的类型要一致</span>
self.subscription<span class="w"> </span><span class="o">=</span><span class="w"> </span>self.create_subscription<span class="o">(</span>
<span class="w">    </span>String,<span class="w">  </span><span class="c1"># 这里的类型要匹配</span>
<span class="w">    </span><span class="s1">&#39;/my_topic&#39;</span>,
<span class="w">    </span>self.callback,
<span class="w">    </span><span class="m">10</span>
<span class="o">)</span>
</code></pre></div>
<hr />
<p><strong>步骤4</strong>: 检查是否有数据</p>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/my_topic
</code></pre></div>
<p>如果一直没输出,说明发布者没在发数据。</p>
<hr />
<p><strong>步骤5</strong>: 检查 QoS 设置</p>
<p>这是个比较隐蔽的问题:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 如果发布者用的是可靠模式</span>
<span class="bp">self</span><span class="o">.</span><span class="n">publisher_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_publisher</span><span class="p">(</span>
    <span class="n">String</span><span class="p">,</span> 
    <span class="s1">&#39;/my_topic&#39;</span><span class="p">,</span> 
    <span class="n">qos_profile</span><span class="o">=</span><span class="n">rclpy</span><span class="o">.</span><span class="n">qos</span><span class="o">.</span><span class="n">QoSProfile</span><span class="p">(</span>
        <span class="n">reliability</span><span class="o">=</span><span class="n">rclpy</span><span class="o">.</span><span class="n">qos</span><span class="o">.</span><span class="n">ReliabilityPolicy</span><span class="o">.</span><span class="n">RELIABLE</span><span class="p">,</span>
        <span class="n">depth</span><span class="o">=</span><span class="mi">10</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="c1"># 订阅者也要用可靠模式,否则收不到</span>
</code></pre></div>
<p>通常情况下,用默认设置就行,别改 QoS。</p>
<hr />
<h3 id="7">问题7: 节点启动后立即退出<a class="headerlink" href="#7" title="Permanent link">&para;</a></h3>
<p><strong>原因1</strong>: 没有 <code>rclpy.spin()</code></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    <span class="n">node</span> <span class="o">=</span> <span class="n">MyNode</span><span class="p">()</span>

    <span class="c1"># ❌ 缺少这一行,节点会立即退出</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">spin</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

    <span class="n">node</span><span class="o">.</span><span class="n">destroy_node</span><span class="p">()</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
</code></pre></div>
<hr />
<p><strong>原因2</strong>: 代码有异常</p>
<p>看日志:</p>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>my_package<span class="w"> </span>my_node

<span class="c1"># 或者查看详细日志</span>
ros2<span class="w"> </span>run<span class="w"> </span>my_package<span class="w"> </span>my_node<span class="w"> </span>--ros-args<span class="w"> </span>--log-level<span class="w"> </span>DEBUG
</code></pre></div>
<hr />
<h3 id="8">问题8: 回调函数不执行<a class="headerlink" href="#8" title="Permanent link">&para;</a></h3>
<p><strong>检查定时器是否创建</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ❌ 忘记保存定时器对象,会被垃圾回收</span>
<span class="bp">self</span><span class="o">.</span><span class="n">create_timer</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">callback</span><span class="p">)</span>

<span class="c1"># ✅ 保存引用</span>
<span class="bp">self</span><span class="o">.</span><span class="n">timer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_timer</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">callback</span><span class="p">)</span>
</code></pre></div>
<hr />
<p><strong>检查回调函数签名</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 订阅者回调必须接收一个参数</span>
<span class="k">def</span><span class="w"> </span><span class="nf">callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>  <span class="c1"># msg 不能省</span>
    <span class="k">pass</span>

<span class="c1"># 定时器回调不需要参数</span>
<span class="k">def</span><span class="w"> </span><span class="nf">timer_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></div>
<hr />
<h2 id="144">14.4 小海龟相关问题<a class="headerlink" href="#144" title="Permanent link">&para;</a></h2>
<hr />
<h3 id="9">问题9: 小海龟窗口是黑屏<a class="headerlink" href="#9" title="Permanent link">&para;</a></h3>
<p><strong>原因</strong>: 虚拟机没开 3D 加速</p>
<p><strong>解决</strong>:</p>
<ol>
<li>关闭虚拟机</li>
<li>虚拟机设置 → 显示 → 勾选"加速 3D 图形"</li>
<li>重启虚拟机</li>
</ol>
<hr />
<h3 id="10-gazebo">问题10: Gazebo 黑屏或闪退<a class="headerlink" href="#10-gazebo" title="Permanent link">&para;</a></h3>
<p><strong>检查显卡驱动</strong>:</p>
<div class="highlight"><pre><span></span><code>glxinfo<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;OpenGL version&quot;</span>
</code></pre></div>
<p>如果报错 <code>glxinfo: command not found</code>:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>mesa-utils
</code></pre></div>
<hr />
<p><strong>虚拟机设置</strong>:</p>
<ul>
<li>显存给到最大(256MB 或更多)</li>
<li>3D 加速必须开启</li>
<li>显卡控制器选 VMSVGA</li>
</ul>
<hr />
<p><strong>如果还是不行</strong>,试试无 GUI 模式:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 启动 Gazebo 时加 --headless</span>
gazebo<span class="w"> </span>--verbose<span class="w"> </span>--headless
</code></pre></div>
<hr />
<h3 id="11">问题11: 小海龟不动<a class="headerlink" href="#11" title="Permanent link">&para;</a></h3>
<p><strong>检查是否发送了速度命令</strong>:</p>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/turtle1/cmd_vel
</code></pre></div>
<p><strong>检查速度值是否为0</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ❌ 没有设置速度</span>
<span class="n">msg</span> <span class="o">=</span> <span class="n">Twist</span><span class="p">()</span>  <span class="c1"># 默认全是0,当然不会动</span>

<span class="c1"># ✅ 设置速度</span>
<span class="n">msg</span> <span class="o">=</span> <span class="n">Twist</span><span class="p">()</span>
<span class="n">msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">1.0</span>
</code></pre></div>
<hr />
<h2 id="145">14.5 权限相关问题<a class="headerlink" href="#145" title="Permanent link">&para;</a></h2>
<hr />
<h3 id="12-permission-denied">问题12: Permission denied<a class="headerlink" href="#12-permission-denied" title="Permanent link">&para;</a></h3>
<p><strong>现象1</strong>: 编译时报错</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 工作空间权限不对</span>
sudo<span class="w"> </span>chown<span class="w"> </span>-R<span class="w"> </span><span class="nv">$USER</span>:<span class="nv">$USER</span><span class="w"> </span>~/ros2_ws
</code></pre></div>
<hr />
<p><strong>现象2</strong>: 无法执行 Python 文件</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 给执行权限</span>
chmod<span class="w"> </span>+x<span class="w"> </span>~/ros2_ws/src/my_package/my_package/my_node.py

<span class="c1"># 或者编译时自动处理(在 setup.py 里已经设置了)</span>
</code></pre></div>
<hr />
<h2 id="146">14.6 网络相关问题<a class="headerlink" href="#146" title="Permanent link">&para;</a></h2>
<hr />
<h3 id="13">问题13: 多台电脑的节点看不到对方<a class="headerlink" href="#13" title="Permanent link">&para;</a></h3>
<p><strong>检查网络</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 互相 ping 一下</span>
ping<span class="w"> </span>对方IP
</code></pre></div>
<hr />
<p><strong>检查 ROS_DOMAIN_ID</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 查看当前设置</span>
<span class="nb">echo</span><span class="w"> </span><span class="nv">$ROS_DOMAIN_ID</span>

<span class="c1"># 设置相同的 ID(0-101)</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">ROS_DOMAIN_ID</span><span class="o">=</span><span class="m">10</span>

<span class="c1"># 永久设置</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;export ROS_DOMAIN_ID=10&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
</code></pre></div>
<hr />
<p><strong>检查防火墙</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Ubuntu 关闭防火墙(测试用)</span>
sudo<span class="w"> </span>ufw<span class="w"> </span>disable

<span class="c1"># 生产环境应该开放特定端口</span>
sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span><span class="m">7400</span>:7500/udp
sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span><span class="m">7400</span>:7500/tcp
</code></pre></div>
<hr />
<h2 id="147">14.7 调试技巧<a class="headerlink" href="#147" title="Permanent link">&para;</a></h2>
<hr />
<h3 id="1_1">技巧1: 打印日志<a class="headerlink" href="#1_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 不同级别的日志</span>
<span class="bp">self</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;调试信息&#39;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;普通信息&#39;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;警告&#39;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;错误&#39;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">fatal</span><span class="p">(</span><span class="s1">&#39;致命错误&#39;</span><span class="p">)</span>
</code></pre></div>
<p>查看日志:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 运行时设置日志级别</span>
ros2<span class="w"> </span>run<span class="w"> </span>my_package<span class="w"> </span>my_node<span class="w"> </span>--ros-args<span class="w"> </span>--log-level<span class="w"> </span>DEBUG
</code></pre></div>
<hr />
<h3 id="2">技巧2: 查看节点信息<a class="headerlink" href="#2" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 列出所有节点</span>
ros2<span class="w"> </span>node<span class="w"> </span>list

<span class="c1"># 查看节点详细信息</span>
ros2<span class="w"> </span>node<span class="w"> </span>info<span class="w"> </span>/my_node

<span class="c1"># 会显示:</span>
<span class="c1"># - 订阅的话题</span>
<span class="c1"># - 发布的话题</span>
<span class="c1"># - 提供的服务</span>
<span class="c1"># - 使用的动作</span>
</code></pre></div>
<hr />
<h3 id="3">技巧3: 查看话题信息<a class="headerlink" href="#3" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 列出所有话题</span>
ros2<span class="w"> </span>topic<span class="w"> </span>list

<span class="c1"># 话题详细信息</span>
ros2<span class="w"> </span>topic<span class="w"> </span>info<span class="w"> </span>/my_topic

<span class="c1"># 实时查看数据</span>
ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/my_topic

<span class="c1"># 查看发布频率</span>
ros2<span class="w"> </span>topic<span class="w"> </span>hz<span class="w"> </span>/my_topic

<span class="c1"># 查看带宽</span>
ros2<span class="w"> </span>topic<span class="w"> </span>bw<span class="w"> </span>/my_topic
</code></pre></div>
<hr />
<h3 id="4">技巧4: 可视化节点关系<a class="headerlink" href="#4" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 图形化显示</span>
ros2<span class="w"> </span>run<span class="w"> </span>rqt_graph<span class="w"> </span>rqt_graph

<span class="c1"># 或者用命令行</span>
ros2<span class="w"> </span>node<span class="w"> </span>list
ros2<span class="w"> </span>topic<span class="w"> </span>list
</code></pre></div>
<hr />
<h3 id="5_1">技巧5: 录制和回放数据<a class="headerlink" href="#5_1" title="Permanent link">&para;</a></h3>
<p><strong>录制</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 录制所有话题</span>
ros2<span class="w"> </span>bag<span class="w"> </span>record<span class="w"> </span>-a

<span class="c1"># 只录制特定话题</span>
ros2<span class="w"> </span>bag<span class="w"> </span>record<span class="w"> </span>/turtle1/cmd_vel<span class="w"> </span>/turtle1/pose

<span class="c1"># 指定输出文件</span>
ros2<span class="w"> </span>bag<span class="w"> </span>record<span class="w"> </span>-o<span class="w"> </span>my_data<span class="w"> </span>/my_topic
</code></pre></div>
<p><strong>回放</strong>:</p>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>bag<span class="w"> </span>play<span class="w"> </span>my_data
</code></pre></div>
<p>这在调试时非常有用,可以反复重现问题。</p>
<hr />
<h3 id="6_1">技巧6: 手动发布消息<a class="headerlink" href="#6_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 测试订阅者是否工作</span>
ros2<span class="w"> </span>topic<span class="w"> </span>pub<span class="w"> </span>/my_topic<span class="w"> </span>std_msgs/msg/String<span class="w"> </span><span class="s2">&quot;data: &#39;test&#39;&quot;</span>

<span class="c1"># 发布 Twist 消息</span>
ros2<span class="w"> </span>topic<span class="w"> </span>pub<span class="w"> </span>/turtle1/cmd_vel<span class="w"> </span>geometry_msgs/msg/Twist<span class="w"> </span><span class="s2">&quot;{linear: {x: 2.0}, angular: {z: 1.8}}&quot;</span>
</code></pre></div>
<hr />
<h3 id="7_1">技巧7: 调用服务<a class="headerlink" href="#7_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 列出服务</span>
ros2<span class="w"> </span>service<span class="w"> </span>list

<span class="c1"># 查看服务类型</span>
ros2<span class="w"> </span>service<span class="w"> </span><span class="nb">type</span><span class="w"> </span>/my_service

<span class="c1"># 调用服务</span>
ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/clear<span class="w"> </span>std_srvs/srv/Empty
</code></pre></div>
<hr />
<h2 id="148">14.8 常用命令速查表<a class="headerlink" href="#148" title="Permanent link">&para;</a></h2>
<h3 id="_2">节点相关<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>node<span class="w"> </span>list<span class="w">                    </span><span class="c1"># 列出节点</span>
ros2<span class="w"> </span>node<span class="w"> </span>info<span class="w"> </span>/节点名<span class="w">             </span><span class="c1"># 节点详情</span>
ros2<span class="w"> </span>run<span class="w"> </span>包名<span class="w"> </span>节点名<span class="w">               </span><span class="c1"># 运行节点</span>
</code></pre></div>
<hr />
<h3 id="_3">话题相关<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>topic<span class="w"> </span>list<span class="w">                   </span><span class="c1"># 列出话题</span>
ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/话题名<span class="w">            </span><span class="c1"># 查看数据</span>
ros2<span class="w"> </span>topic<span class="w"> </span>info<span class="w"> </span>/话题名<span class="w">            </span><span class="c1"># 话题信息</span>
ros2<span class="w"> </span>topic<span class="w"> </span>hz<span class="w"> </span>/话题名<span class="w">              </span><span class="c1"># 发布频率</span>
ros2<span class="w"> </span>topic<span class="w"> </span>bw<span class="w"> </span>/话题名<span class="w">              </span><span class="c1"># 带宽</span>
ros2<span class="w"> </span>topic<span class="w"> </span>pub<span class="w"> </span>/话题名<span class="w"> </span>类型<span class="w"> </span>数据<span class="w">   </span><span class="c1"># 发布消息</span>
</code></pre></div>
<hr />
<h3 id="_4">服务相关<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>service<span class="w"> </span>list<span class="w">                 </span><span class="c1"># 列出服务</span>
ros2<span class="w"> </span>service<span class="w"> </span><span class="nb">type</span><span class="w"> </span>/服务名<span class="w">          </span><span class="c1"># 服务类型</span>
ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/服务名<span class="w"> </span>类型<span class="w">     </span><span class="c1"># 调用服务</span>
</code></pre></div>
<hr />
<h3 id="_5">参数相关<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>param<span class="w"> </span>list<span class="w">                   </span><span class="c1"># 列出参数</span>
ros2<span class="w"> </span>param<span class="w"> </span>get<span class="w"> </span>/节点名<span class="w"> </span>参数名<span class="w">      </span><span class="c1"># 获取参数</span>
ros2<span class="w"> </span>param<span class="w"> </span><span class="nb">set</span><span class="w"> </span>/节点名<span class="w"> </span>参数名<span class="w"> </span>值<span class="w">   </span><span class="c1"># 设置参数</span>
ros2<span class="w"> </span>param<span class="w"> </span>dump<span class="w"> </span>/节点名<span class="w">            </span><span class="c1"># 导出参数</span>
</code></pre></div>
<hr />
<h3 id="_6">包相关<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>pkg<span class="w"> </span>list<span class="w">                     </span><span class="c1"># 列出所有包</span>
ros2<span class="w"> </span>pkg<span class="w"> </span>list<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>xxx<span class="w">          </span><span class="c1"># 搜索包</span>
ros2<span class="w"> </span>pkg<span class="w"> </span>create<span class="w">                   </span><span class="c1"># 创建包</span>
ros2<span class="w"> </span>pkg<span class="w"> </span>executables<span class="w"> </span>包名<span class="w">         </span><span class="c1"># 列出包的节点</span>
</code></pre></div>
<hr />
<h3 id="_7">接口相关<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>interface<span class="w"> </span>list<span class="w">               </span><span class="c1"># 列出接口</span>
ros2<span class="w"> </span>interface<span class="w"> </span>show<span class="w"> </span>类型名<span class="w">        </span><span class="c1"># 查看接口定义</span>
ros2<span class="w"> </span>interface<span class="w"> </span>package<span class="w"> </span>包名<span class="w">       </span><span class="c1"># 包的接口</span>
</code></pre></div>
<hr />
<h3 id="_8">编译相关<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>colcon<span class="w"> </span>build<span class="w">                                    </span><span class="c1"># 编译所有</span>
colcon<span class="w"> </span>build<span class="w"> </span>--packages-select<span class="w"> </span>包名<span class="w">             </span><span class="c1"># 编译指定包</span>
colcon<span class="w"> </span>build<span class="w"> </span>--packages-up-to<span class="w"> </span>包名<span class="w">              </span><span class="c1"># 编译包及依赖</span>
colcon<span class="w"> </span>build<span class="w"> </span>--packages-skip<span class="w"> </span>包名<span class="w">               </span><span class="c1"># 跳过某包</span>
colcon<span class="w"> </span>build<span class="w"> </span>--symlink-install<span class="w">                 </span><span class="c1"># 符号链接(Python推荐)</span>
</code></pre></div>
<hr />
<h2 id="149">14.9 问题排查流程<a class="headerlink" href="#149" title="Permanent link">&para;</a></h2>
<p>遇到问题时,按这个流程走:</p>
<hr />
<h3 id="1_2">第1步: 看报错信息<a class="headerlink" href="#1_2" title="Permanent link">&para;</a></h3>
<p><strong>仔细看报错</strong>,往往已经告诉你问题在哪了。</p>
<div class="highlight"><pre><span></span><code>Package &#39;xxx&#39; not found  → 包没找到,检查环境
No module named &#39;xxx&#39;    → Python包没装
Permission denied        → 权限问题
</code></pre></div>
<hr />
<h3 id="2_1">第2步: 检查环境<a class="headerlink" href="#2_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 环境加载了吗?</span>
<span class="nb">source</span><span class="w"> </span>/opt/ros/humble/setup.bash
<span class="nb">source</span><span class="w"> </span>~/ros2_ws/install/setup.bash

<span class="c1"># 包存在吗?</span>
ros2<span class="w"> </span>pkg<span class="w"> </span>list<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>my_package
</code></pre></div>
<hr />
<h3 id="3_1">第3步: 检查代码<a class="headerlink" href="#3_1" title="Permanent link">&para;</a></h3>
<ul>
<li>setup.py 配置对吗?</li>
<li>消息类型匹配吗?</li>
<li>语法错误?</li>
</ul>
<hr />
<h3 id="4_1">第4步: 查看日志<a class="headerlink" href="#4_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>my_package<span class="w"> </span>my_node<span class="w"> </span>--ros-args<span class="w"> </span>--log-level<span class="w"> </span>DEBUG
</code></pre></div>
<hr />
<h3 id="5_2">第5步: 搜索<a class="headerlink" href="#5_2" title="Permanent link">&para;</a></h3>
<ul>
<li>Google: <code>ros2 + 你的错误信息</code></li>
<li>ROS Answers: https://answers.ros.org</li>
<li>GitHub Issues</li>
<li>鱼香ROS社区: http://fishros.org.cn</li>
</ul>
<hr />
<h3 id="6_2">第6步: 还不行?<a class="headerlink" href="#6_2" title="Permanent link">&para;</a></h3>
<ul>
<li>重启终端</li>
<li>重新编译</li>
<li>重启电脑(别笑,有时候真管用)</li>
</ul>
<hr />
<h2 id="1410">14.10 预防性措施<a class="headerlink" href="#1410" title="Permanent link">&para;</a></h2>
<p>与其出了问题再解决,不如提前预防:</p>
<hr />
<h3 id="1_3">措施1: 养成好习惯<a class="headerlink" href="#1_3" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 编译后必 source</span>
colcon<span class="w"> </span>build<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">source</span><span class="w"> </span>install/setup.bash

<span class="c1"># 或者用这个别名(加到 .bashrc)</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">cb</span><span class="o">=</span><span class="s1">&#39;cd ~/ros2_ws &amp;&amp; colcon build &amp;&amp; source install/setup.bash&#39;</span>
</code></pre></div>
<hr />
<h3 id="2_2">措施2: 使用版本控制<a class="headerlink" href="#2_2" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/ros2_ws
git<span class="w"> </span>init
git<span class="w"> </span>add<span class="w"> </span>.
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;初始版本&quot;</span>

<span class="c1"># 每次改完:</span>
git<span class="w"> </span>add<span class="w"> </span>.
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;添加了 xxx 功能&quot;</span>

<span class="c1"># 搞砸了可以回退</span>
git<span class="w"> </span>log
git<span class="w"> </span>reset<span class="w"> </span>--hard<span class="w"> </span>版本号
</code></pre></div>
<hr />
<h3 id="3_2">措施3: 虚拟机快照<a class="headerlink" href="#3_2" title="Permanent link">&para;</a></h3>
<p>关键节点拍快照:</p>
<ul>
<li>系统装好后</li>
<li>ROS2 装好后</li>
<li>第一个程序跑通后</li>
</ul>
<hr />
<h3 id="4_2">措施4: 写测试<a class="headerlink" href="#4_2" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 简单测试</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_my_function</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">my_function</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;计算错误&quot;</span>
</code></pre></div>
<hr />
<h3 id="5_3">措施5: 模块化开发<a class="headerlink" href="#5_3" title="Permanent link">&para;</a></h3>
<p>不要把所有代码塞一个文件里,拆成多个节点。</p>
<p>好处:</p>
<ul>
<li>容易调试(问题隔离)</li>
<li>容易复用</li>
<li>出问题影响小</li>
</ul>
<hr />
<h2 id="_9">本章小结<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h2>
<p>这一章我们梳理了学习 ROS2 过程中最常见的问题:</p>
<ul>
<li>✅ 环境配置(最高频)</li>
<li>✅ 编译问题</li>
<li>✅ 运行问题</li>
<li>✅ 调试技巧</li>
<li>✅ 问题排查流程</li>
</ul>
<div class="admonition success">
<p class="admonition-title">记住这句话</p>
<p><strong>遇到问题不要慌,99% 的问题都有人遇到过。</strong></p>
<p>善用搜索引擎,善用社区,大部分问题几分钟就能解决。</p>
</div>
<hr />
<h2 id="_10">实用建议<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p><strong>把常用命令记下来</strong><br />
   可以打印这一章的速查表,贴在电脑旁边</p>
</li>
<li>
<p><strong>遇到新问题记录下来</strong><br />
   下次遇到直接翻笔记,比重新搜索快</p>
</li>
<li>
<p><strong>加入社区</strong>  </p>
</li>
<li>ROS Discourse  </li>
<li>ROS QQ群/微信群  </li>
<li>
<p>鱼香ROS社区</p>
</li>
<li>
<p><strong>帮助别人</strong><br />
   教是最好的学。在论坛上回答别人的问题,你会学得更深</p>
</li>
</ol>
<hr />
<h2 id="_11">结束<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h2>
<p>后期我们会推荐一些学习资源,<br />
帮你在 ROS2 的道路上走得更远!</p>
<p><strong>联系方式</strong></p>
<ul>
<li>
<p>QQ号: 3549289002</p>
</li>
<li>
<p>微信: cyj200310060</p>
</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>